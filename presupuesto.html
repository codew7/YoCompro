<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yo Compro</title>

    <style>
        /* Reset y estilos base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Ocultar flechas de input number */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }

        /* Estilos globales */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            color: #2c3e50;
            padding: 20px;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 30px;
        }

        /* Encabezado */
        .encabezado {
            border-bottom: 2px solid #e1e8ed;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .encabezado-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .encabezado-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .encabezado img {
            max-width: 80px;
            height: auto;
        }

        .encabezado h3 {
            font-size: 24px;
            color: #2c3e50;
            font-weight: 600;
        }

        .encabezado-contacto {
            text-align: right;
            font-size: 13px;
            color: #5a6c7d;
        }

        .whatsapp-icon {
            width: 18px;
            height: 18px;
            vertical-align: middle;
            margin-left: 5px;
        }

        #fecha {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 10px;
        }

        /* Sección de información del cliente */
        .cliente-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 6px;
        }

        input[type="text"],
        input[type="number"],
        select {
            padding: 10px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s, box-shadow 0.2s;
            background: white;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        /* Tabla de artículos */
        .tabla-section {
            margin-bottom: 25px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            background: white;
        }

        thead {
            background: #34495e;
            color: white;
        }

        th {
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 10px 8px;
            border: 1px solid #e1e8ed;
        }

        tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        tbody tr:hover {
            background: #e8f4f8;
        }

        table th:nth-child(2),
        table td:nth-child(2) {
            text-align: left;
        }

        th:nth-child(1), td:nth-child(1) {
            width: 10%;
        }

        th:nth-child(2), td:nth-child(2) {
            width: 50%;
        }

        th:nth-child(3), td:nth-child(3) {
            width: 20%;
        }

        th:nth-child(4), td:nth-child(4) {
            width: 20%;
        }

        .cantidad, .articulo, .valor {
            width: 100%;
            padding: 8px;
            border: 1px solid #e1e8ed;
            border-radius: 3px;
        }

        .total {
            font-weight: 600;
            color: #2c3e50;
        }

        /* Botones */
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        button:hover {
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-agregar {
            background: #4a90e2;
            color: white;
            margin-bottom: 20px;
        }

        .btn-agregar:hover {
            background: #357abd;
        }

        /* Totales */
        .totals {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 25px;
        }

        .totals-grid {
            display: grid;
            gap: 12px;
            max-width: 400px;
            margin-left: auto;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }

        .total-row.final {
            border-top: 2px solid #34495e;
            padding-top: 12px;
            margin-top: 8px;
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
        }

        .total-label {
            font-weight: 600;
            color: #495057;
        }

        .total-value {
            font-weight: 600;
            color: #2c3e50;
        }

        #descuento {
            width: 100px;
            text-align: right;
        }

        /* Forma de pago */
        .forma-pago-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e1e8ed;
        }

        #formaPago {
            width: 100%;
            max-width: 200px;
        }

        /* Acciones */
        .actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 25px;
        }

        .btn-imprimir {
            background: #27ae60;
            color: white;
        }

        .btn-imprimir:hover {
            background: #229954;
        }

        .btn-nuevo {
            background: #95a5a6;
            color: white;
        }

        .btn-nuevo:hover {
            background: #7f8c8d;
        }

        /* Responsividad */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 20px;
            }

            .encabezado-top {
                flex-direction: column;
                align-items: flex-start;
            }

            .encabezado-contacto {
                text-align: left;
            }

            .cliente-info {
                grid-template-columns: 1fr;
                padding: 15px;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 8px 4px;
            }

            .actions {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }

        /* Estilos para impresión - formato recibo/factura adaptable */
        @media print {
            @page {
                size: auto;
                margin: 15mm;
            }

            * {
                box-sizing: border-box;
            }

            body {
                background-color: white;
                margin: 0;
                padding: 0;
                width: 100%;
            }

            .container {
                width: 100%;
                max-width: 100%;
                margin: 0;
                padding: 10px;
                border-radius: 0;
                box-shadow: none;
                overflow: visible;
            }

            .encabezado {
                text-align: center;
                margin-bottom: 10px;
                border-bottom: 1px dashed #000;
                padding-bottom: 10px;
                overflow: visible;
            }

            .encabezado h3 {
                font-size: 16px;
                margin: 5px 0;
                text-align: left;
            }

            .encabezado p {
                font-size: 11px;
                margin: 2px 0;
            }

            #fecha {
                text-align: left;
                margin: 5px 0;
            }

            .encabezado img {
                max-width: 60px;
            }

            .encabezado > div {
                overflow: visible;
            }

            .header {
                margin-bottom: 10px;
                border-bottom: 1px dashed #000;
                padding-bottom: 8px;
                width: 100%;
                overflow: visible;
            }

            .header label {
                font-size: 12px;
                display: block;
                word-wrap: break-word;
            }

            /* Ocultar inputs y mostrar solo valores en impresión */
            input {
                border: none;
                background: transparent;
                padding: 0;
                font-size: 11px;
                font-weight: normal;
                width: auto !important;
                max-width: 100%;
            }

            label {
                font-size: 11px;
            }

            table {
                font-size: 11px;
                margin-top: 5px;
                width: 100%;
                table-layout: fixed;
                border-collapse: collapse;
            }

            th, td {
                padding: 5px 2px;
                font-size: 11px;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }

            /* Ajustar anchos de columnas para evitar desbordamiento */
            th:nth-child(1), td:nth-child(1) {
                width: 10%;
            }

            th:nth-child(2), td:nth-child(2) {
                width: 50%;
            }

            th:nth-child(3), td:nth-child(3) {
                width: 20%;
            }

            th:nth-child(4), td:nth-child(4) {
                width: 20%;
            }

            th {
                background-color: #f0f0f0;
            }

            .totals {
                margin-top: 10px;
                border-top: 1px dashed #000;
                padding-top: 10px;
                font-size: 12px;
                width: 100%;
                overflow: visible;
                text-align: right;
            }

            .totals label {
                font-size: 12px;
                margin: 3px 0;
                display: block;
                text-align: right;
            }

            #formaPago {
                display: none;
            }

            /* Ocultar botones y elementos no necesarios en impresión */
            .actions,
            button {
                display: none !important;
            }

            .whatsapp-icon {
                display: none;
            }

            /* Ajustar totales para formato recibo */
            #subtotal, #descuento, #totalFinal {
                font-weight: bold;
            }
        }

    </style>
</head>
<body>
    <div class="container" id="presupuesto">
        
        <!-- Encabezado -->
        <div class="encabezado">
            <div class="encabezado-top">
                <div class="encabezado-logo">
                    <img src="logo.png" alt="Logo">
                    <h3>Presupuesto</h3>
                </div>
                <div class="encabezado-contacto">
                    <p>Tel. 266 4328198 <img src="whatsapp.png" alt="WhatsApp" class="whatsapp-icon"></p>
                </div>
            </div>
            <p id="fecha"></p>
        </div>
        
        <!-- Información del Cliente -->
        <div class="cliente-info">
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre">
            </div>
            <div class="form-group">
                <label for="domicilio">Domicilio</label>
                <input type="text" id="domicilio">
            </div>
            <div class="form-group">
                <label for="telefono">Teléfono</label>
                <input type="text" id="telefono">
            </div>
        </div>

        <!-- Tabla de Artículos -->
        <div class="tabla-section">
            <table>
                <thead>
                    <tr>
                        <th>Cant</th>
                        <th>Artículo</th>
                        <th>Valor U.</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="items">
                    <tr>
                        <td><input type="number" class="cantidad" oninput="calcularTotales()"></td>
                        <td><input type="text" class="articulo"></td>
                        <td><input type="number" class="valor" oninput="calcularTotales()"></td>
                        <td class="total">$0</td>
                    </tr>
                </tbody>
            </table>
            <button class="btn-agregar" onclick="agregarFila()">+ Agregar Artículo</button>
        </div>

        <!-- Totales -->
        <div class="totals">
            <div class="totals-grid">
                <div class="total-row">
                    <span class="total-label">Subtotal:</span>
                    <span class="total-value">$<span id="subtotal">0</span></span>
                </div>
                <div class="total-row">
                    <span class="total-label">Descuento:</span>
                    <span>$<input type="number" id="descuento" value="0" oninput="calcularTotales()"></span>
                </div>
                <div class="total-row final">
                    <span class="total-label">Total Final:</span>
                    <span class="total-value">$<span id="totalFinal">0</span></span>
                </div>
                <div class="forma-pago-section">
                    <div class="form-group">
                        <label for="formaPago">Forma de Pago</label>
                        <select id="formaPago">
                            <option value="Efectivo">Efectivo</option>
                            <option value="MercadoPago">MercadoPago</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Acciones -->
        <div class="actions">
            <button class="btn-imprimir" onclick="compartirPresupuesto()">Imprimir</button>
            <button class="btn-nuevo" onclick="nuevoPresupuesto()">Nuevo</button>
        </div>
    </div>
    
    <script>
        // Obtener la fecha actual
        const fechaActual = new Date();

        // Formatear la fecha en formato: día mes año
        const opciones = { year: 'numeric', month: 'long', day: 'numeric' };
        const fechaFormateada = fechaActual.toLocaleDateString('es-ES', opciones);

        // Mostrar la fecha en el elemento con id "fecha"
        document.getElementById('fecha').innerText = fechaFormateada;

        function calcularTotales() {
            let subtotal = 0;
            document.querySelectorAll('#items tr').forEach(row => {
                let cantidad = parseInt(row.querySelector('.cantidad').value) || 0;
                let valor = parseInt(row.querySelector('.valor').value) || 0;
                let total = cantidad * valor;
                row.querySelector('.total').innerText = `$${total.toLocaleString('es-ES')}`;
                subtotal += total;
            });
            document.getElementById('subtotal').innerText = subtotal.toLocaleString('es-ES');
            let descuento = parseInt(document.getElementById('descuento').value) || 0;
            document.getElementById('totalFinal').innerText = (subtotal - descuento).toLocaleString('es-ES');
        }

        function agregarFila() {
            let fila = `<tr>
                <td><input type="number" class="cantidad" oninput="calcularTotales()"></td>
                <td><input type="text" class="articulo"></td>
                <td><input type="number" class="valor" oninput="calcularTotales()"></td>
                <td class="total">$0</td>
            </tr>`;
            document.getElementById('items').insertAdjacentHTML('beforeend', fila);
        }

        function compartirPresupuesto() {
            window.print();
        }

        function nuevoPresupuesto() {
            document.getElementById('nombre').value = "";
            document.getElementById('domicilio').value = "";
            document.getElementById('telefono').value = "";
            document.getElementById('descuento').value = 0;
            document.getElementById('formaPago').value = "Efectivo";
            document.getElementById('subtotal').innerText = 0;
            document.getElementById('totalFinal').innerText = 0;
            document.getElementById('items').innerHTML = `<tr>
                <td><input type="number" class="cantidad" oninput="calcularTotales()"></td>
                <td><input type="text" class="articulo"></td>
                <td><input type="number" class="valor" oninput="calcularTotales()"></td>
                <td class="total">$0</td>
            </tr>`;
        }



    </script>
</body>
</html>